{% extends 'base.html' %}

{% block content_class %}p-0{% endblock %}

{% block content %}
<!-- ÙÙŠ Ø±Ø£Ø³ Ø§Ù„Ù‚Ø§Ù„Ø¨ -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
<div class="container-fluid g-0 m-0 w-100 full-width-container">
  <!-- Ø±Ø£Ø³ Ø§Ù„ØµÙØ­Ø© -->
<div class="bg-light p-3 d-flex justify-content-between align-items-center flex-wrap gap-2"> <h2 class="mb-0 fs-4"> <i class="fas fa-file-invoice ms-2"></i> ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø·Ù„Ø¨ #{{  order.reference_id | safe }}
   </h2> 
    <div>
      <a href="{{ url_for('orders.index') }}" class="btn btn-outline-secondary btn-sm">
        <i class="fas fa-arrow-left ms-1"></i> Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„Ø·Ù„Ø¨Ø§Øª
      </a>
    </div>
  </div> 

  <div class="row g-0 mx-0">
    <!-- Ø§Ù„Ù‚Ø³Ù… Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ - ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø·Ù„Ø¨ -->
    <div class="col-12 p-3">
      <div class="card shadow-sm mb-3 border-0">
        <div class="card-header bg-white d-flex justify-content-between align-items-center flex-wrap py-2">
          <h5 class="mb-0 fs-5">Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø·Ù„Ø¨</h5>
          <span class="badge rounded-pill bg-{{ order.status.slug | replace('under_review', 'warning') | replace('processing', 'info') | replace('completed', 'success') | replace('awaiting_payment', 'warning') | replace('shipped', 'primary') | replace('delivered', 'success') | replace('canceled', 'danger') | replace('refunded', 'secondary') }}">
            {{ order.status.name | safe }}
          </span>
        </div>
        <div class="card-body p-2">
          <h5 class="border-bottom pb-2 mb-2 fs-5">
            <i class="fas fa-boxes ms-2"></i>Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª ({{ order.order_items | length }})
          </h5>

          <!-- ØªØ¹Ø¯ÙŠÙ„ Ù‡Ù†Ø§ Ù„Ø¹Ø±Ø¶ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª ÙÙŠ ØµÙÙˆÙ Ù…Ø¹ ØªÙ…Ø±ÙŠØ± Ø£ÙÙ‚ÙŠ -->
          <div class="table-responsive">
            <table class="table table-borderless">
              <tbody>
                {% for item in order.order_items %}
     <tr class="border-bottom">
  <!-- ØµÙˆØ±Ø© Ø§Ù„Ù…Ù†ØªØ¬ -->
  <td style="width: 120px; min-width: 120px;">
    <div class="d-flex justify-content-center">
      {% if item.main_image %}
      <img src="{{ item.main_image | safe }}" alt="{{ item.name | safe }}"
           class="img-fluid rounded product-image"
           style="width: 160px; height: 160px; object-fit: cover;"
           loading="lazy">
      {% else %}
      <div class="bg-light d-flex align-items-center justify-content-center rounded product-image-placeholder" 
           style="width: 80px; height: 80px;">
        <i class="fas fa-image fa-lg text-muted"></i>
      </div>
      {% endif %}
    </div>
    <div class="text-center mt-1 small text-muted">
      Ø§Ù„ÙƒÙ…ÙŠØ©: {{ item.quantity }}
    </div>
  </td>
  
  <!-- Ø®ÙŠØ§Ø±Ø§Øª Ø§Ù„Ù…Ù†ØªØ¬ -->
  <td style="min-width: 150px;">
{% if item.options %}
<div class="text-start product-options">
  <h6 class="mb-1 small text-muted">
    <i class="fas fa-cogs me-1"></i>Ø®ÙŠØ§Ø±Ø§Øª
  </h6>
  <ul class="list-group list-group-flush small">
    {% for option in item.options %}
    <li class="list-group-item d-flex justify-content-between py-1 px-0 option-item">
      <span class="fw-bold">{{ option.name | safe }}</span>
      <span class="text-wrap text-end" style="max-width: 60%;">
        {{ option.value | safe }}
      </span>
    </li>
    {% endfor %}
  </ul> 
</div>
{% else %}
<div class="alert alert-info p-1 mt-2 small">
  <i class="fas fa-info-circle me-1"></i>
  Ù„Ø§ ØªÙˆØ¬Ø¯ Ø®ÙŠØ§Ø±Ø§Øª Ù„Ù‡Ø°Ø§ Ø§Ù„Ù…Ù†ØªØ¬
</div>
{% endif %}
  </td>
  
  <!-- Ø¨Ø§Ø±ÙƒÙˆØ¯ Ø§Ù„Ù…Ù†ØªØ¬ -->
  <td style="width: 150px; min-width: 150px;">
    {% if item.barcode %}
    <div class="d-flex flex-column align-items-center">
    
      <div class="barcode-container p-1 border rounded">
        <img src="{{ url_for('orders.serve_barcode', filename=item.barcode) | safe }}"
             alt="Ø¨Ø§Ø±ÙƒÙˆØ¯ Ø§Ù„Ù…Ù†ØªØ¬ {{ item.name | safe }}"
             class="img-fluid"
             style="max-height: 40px;">
        <div class="mt-1 small text-center">#{{ item.id | safe }}</div>
      </div>
    </div>
    {% endif %}
  </td>
</tr>
                {% endfor %}
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>

    <!-- Ø§Ù„Ø¹Ù…ÙˆØ¯ Ø§Ù„Ø¬Ø§Ù†Ø¨ÙŠ -->
    <div class="col-lg-4 bg-light p-3">
      <!-- Ù‚Ø³Ù… Ø§Ù„Ø­Ø§Ù„Ø§Øª Ø§Ù„Ù…Ø®ØµØµØ© Ù„Ù„Ù…ÙˆØ¸Ù -->
      <div class="card shadow-sm mb-3 border-0">
        <div class="card-header bg-white py-2">
          <h5 class="mb-0 fs-5"><i class="fas fa-tags ms-2"></i>Ø­Ø§Ù„Ø© Ø§Ù„Ø·Ù„Ø¨ </h5>
        </div>
        <div class="card-body p-2">
          {% if current_employee %}
          <form action="{{ url_for('orders.add_employee_status', order_id=order.id) }}" method="POST" id="employee-status-form">
            <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
            <div class="mb-2">
              <label class="form-label small">Ø§Ø®ØªØ± Ø­Ø§Ù„Ø©</label>
              <select class="form-select form-select-sm" name="status_id" required>
                <option value="">Ø§Ø®ØªØ± Ø­Ø§Ù„Ø©</option>
                {% for status in current_employee.custom_statuses if status.is_active %}
                <option value="{{ status.id }}">{{ status.name | safe }}</option>
                {% endfor %}
              </select>
            </div>
            <div class="mb-2">
              <label for="custom-note" class="form-label small">Ù…Ù„Ø§Ø­Ø¸Ø© (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)</label>
              <textarea class="form-control form-control-sm" id="custom-note" 
                        name="note" rows="2" placeholder="Ø£Ø¯Ø®Ù„ Ù…Ù„Ø§Ø­Ø¸Ø§ØªÙƒ Ù‡Ù†Ø§..." maxlength="500"></textarea>
            </div>
            <button type="submit" class="btn btn-primary btn-sm w-100">
              <i class="fas fa-plus me-1"></i> Ø¥Ø¶Ø§ÙØ© Ø­Ø§Ù„Ø©
            </button>
          </form>
          {% endif %}
          
          <div class="mt-3">
            <h6 class="border-bottom pb-1 small">Ø§Ù„Ø­Ø§Ù„Ø§Øª Ø§Ù„Ù…Ø³Ø¬Ù„Ø©</h6>
            <ul class="list-group list-group-flush small">
              {% if employee_statuses %}
                {% for emp_status, custom_status, employee in employee_statuses %}
                <li class="list-group-item d-flex justify-content-between py-1 px-0">
                  <div>
                    <span class="badge" style="background-color: {{ custom_status.color | safe }}; color: white;">
                      {{ custom_status.name | safe }}
                    </span>
                    {% if emp_status.note %}
                      <span class="ms-2">{{ emp_status.note | safe }}</span>
                    {% endif %}
                    <div class="text-muted small mt-1">
                      <i class="fas fa-user me-1"></i>{{ employee.email | safe }}
                    </div>
                  </div>
                  <div class="text-muted">{{ emp_status.created_at.strftime('%Y-%m-%d %H:%M') }}</div>
                </li>
                {% endfor %}
              {% else %}
                <li class="list-group-item py-2 text-center text-muted">Ù„Ø§ ØªÙˆØ¬Ø¯ Ø­Ø§Ù„Ø§Øª Ù…Ø³Ø¬Ù„Ø©</li>
              {% endif %}
            </ul>
          </div> 
        </div>
      </div>

      <!-- Ù‚Ø³Ù… Ø§Ù„Ø­Ø§Ù„Ø§Øª Ø§Ù„Ø®Ø§ØµØ© (Ù„Ù„Ù…Ø±Ø§Ø¬Ø¹ÙŠÙ† ÙÙ‚Ø·) -->
<!-- Ù‚Ø³Ù… Ø§Ù„Ø­Ø§Ù„Ø§Øª Ø§Ù„Ø®Ø§ØµØ© -->
<!-- Ø¨Ø¯Ø§ÙŠØ© Ø§Ù„ØªØ¹Ø¯ÙŠÙ„ - Ù‚Ø³Ù… Ø§Ù„Ø­Ø§Ù„Ø§Øª Ø§Ù„Ø®Ø§ØµØ© -->
<!-- Ø¨Ø¯Ø§ÙŠØ© Ø§Ù„ØªØ¹Ø¯ÙŠÙ„ - Ù‚Ø³Ù… Ø§Ù„Ø­Ø§Ù„Ø§Øª Ø§Ù„Ø®Ø§ØµØ© -->
<!-- Ø¨Ø¯Ø§ÙŠØ© Ø§Ù„ØªØ¹Ø¯ÙŠÙ„ - Ù‚Ø³Ù… Ø§Ù„Ø­Ø§Ù„Ø§Øª Ø§Ù„Ø®Ø§ØµØ© -->
{% if is_reviewer %}
<div class="card shadow-sm mb-3 border-0">
    <div class="card-header bg-white py-2">
        <h5 class="mb-0 fs-5"><i class="fas fa-flag ms-2"></i>Ø­Ø§Ù„Ø§Øª Ø®Ø§ØµØ©</h5>
    </div>
    <div class="card-body p-2">
        <form action="{{ url_for('orders.add_status_note', order_id=order.id) }}" method="POST">
            <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
            
            <div class="mb-3">
                <label class="form-label small fw-bold">Ø§Ø®ØªØ± Ø­Ø§Ù„Ø©</label>
                <select class="form-select form-select-sm" name="status_type" required>
                    <option value="">-- Ø§Ø®ØªØ± Ø­Ø§Ù„Ø© --</option>
                    
                    <!-- Ø§Ù„Ø­Ø§Ù„Ø§Øª Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠØ© -->
                    <optgroup label="Ø§Ù„Ø­Ø§Ù„Ø§Øª Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠØ©">
                        <option value="late">Ù…ØªØ£Ø®Ø±</option>
                        <option value="missing">ÙˆØ§ØµÙ„ Ù†Ø§Ù‚Øµ</option>
                        <option value="refunded">Ù…Ø±ØªØ¬Ø¹</option>
                        <option value="not_shipped">Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø´Ø­Ù†</option>
                    </optgroup>
                    
                    <!-- Ø§Ù„Ø­Ø§Ù„Ø§Øª Ø§Ù„Ù…Ø®ØµØµØ© -->
                    {% if custom_note_statuses %}
                    <optgroup label="Ø§Ù„Ø­Ø§Ù„Ø§Øª Ø§Ù„Ù…Ø®ØµØµØ©">
                        {% for status in custom_note_statuses %}
                        <option value="custom_{{ status.id }}">
                            {{ status.name }}
                        </option>
                        {% endfor %}
                    </optgroup>
                    {% endif %}
                </select>
            </div>
            
            
            <div class="mb-3">
                <label class="form-label small fw-bold">Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø¥Ø¶Ø§ÙÙŠØ©</label>
                <textarea class="form-control form-control-sm" name="note" rows="3" 
                          placeholder="Ø£Ø¯Ø®Ù„ Ù…Ù„Ø§Ø­Ø¸Ø§ØªÙƒ Ù‡Ù†Ø§..."></textarea>
            </div>
            
            <button type="submit" class="btn btn-primary btn-sm w-100">
                <i class="fas fa-save me-1"></i> Ø­ÙØ¸ Ø§Ù„Ø­Ø§Ù„Ø©
            </button>
        </form>
{% endif %}
{% for item in order.order_items %}
<tr class="border-bottom">
  <!-- ØµÙˆØ±Ø© Ø§Ù„Ù…Ù†ØªØ¬ -->
  <td style="width: 120px; min-width: 120px;">
    <div class="d-flex justify-content-center">
      {% if item.main_image %}
      <img src="{{ item.main_image | safe }}" alt="{{ item.name | safe }}"
           class="img-fluid rounded product-image"
           style="width: 160px; height: 160px; object-fit: cover;"
           loading="lazy" id="product-image-{{ loop.index }}">
      {% else %}
      <div class="bg-light d-flex align-items-center justify-content-center rounded product-image-placeholder" 
           style="width: 80px; height: 80px;">
        <i class="fas fa-image fa-lg text-muted"></i>
      </div>
      {% endif %}
    </div>
    <div class="text-center mt-1 small text-muted">
      Ø§Ù„ÙƒÙ…ÙŠØ©: {{ item.quantity }}
    </div>
    
    <!-- Ø²Ø± Ø§Ù„Ù…Ø´Ø§Ø±ÙƒØ© -->
    <div class="text-center mt-2">
      <button class="btn btn-sm btn-success share-btn" 
              data-product-name="{{ item.name | safe }}"
              data-product-image="{{ item.main_image | safe if item.main_image else '' }}"
              data-product-options="{{ item.options | tojson | safe }}"
              title="Ù…Ø´Ø§Ø±ÙƒØ© Ø¹Ø¨Ø± ÙˆØ§ØªØ³Ø§Ø¨">
        <i class="fab fa-whatsapp"></i> Ù…Ø´Ø§Ø±ÙƒØ©
      </button>
    </div>
  </td>
  <!-- ... -->
</tr>
{% endfor %}
        <!-- Ø¹Ø±Ø¶ Ø§Ù„Ø­Ø§Ù„Ø§Øª Ø§Ù„Ù…Ø³Ø¬Ù„Ø© ÙÙŠ Ù‚Ø§Ø¦Ù…Ø© ÙˆØ§Ø­Ø¯Ø© -->
        <div class="mt-4">
            <h6 class="border-bottom pb-2 mb-3 small fw-bold">ØªÙ†Ø¨ÙŠÙ‡Ø§Øª  </h6>
            {% if status_notes %}
                <div class="list-group list-group-flush">
                    {% for note in status_notes %}
                    <div class="list-group-item py-2 px-0">
                        <div class="d-flex justify-content-between align-items-start">
                            <div>
                                <!-- Ø¹Ø±Ø¶ Ø§Ù„Ø­Ø§Ù„Ø© Ù…Ø¹ Ù„ÙˆÙ†Ù‡Ø§ -->
                                <span class="badge" style="
                                    {% if note.custom_status %} 
                                        background-color: {{ note.custom_status.color }};
                                    {% else %}
                                        background-color: 
                                            {% if note.status_flag == 'late' %}#ffc107
                                            {% elif note.status_flag == 'missing' %}#dc3545
                                            {% elif note.status_flag == 'not_shipped' %}#0dcaf0
                                            {% elif note.status_flag == 'refunded' %}#6c757d
                                            {% else %}#6c757d
                                            {% endif %};
                                    {% endif %} 
                                    color: white;">
                                    
                                    {% if note.custom_status %}
                                        <i class="fas fa-tag me-1"></i>{{ note.custom_status.name }}
                                    {% else %}
                                        <i class="fas fa-flag me-1"></i>
                                        {{ 
                                            'Ù…ØªØ£Ø®Ø±' if note.status_flag == 'late'
                                            else 'ÙˆØ§ØµÙ„ Ù†Ø§Ù‚Øµ' if note.status_flag == 'missing'
                                            else 'Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø´Ø­Ù†' if note.status_flag == 'not_shipped'
                                            else 'Ù…Ø±ØªØ¬Ø¹' if note.status_flag == 'refunded'
                                            else note.status_flag
                                        }}
                                    {% endif %}
                                </span>
                                
                                {% if note.note %}
                                    <p class="mb-0 mt-1 small">{{ note.note }}</p>
                                {% endif %}
                            </div>
                            <div class="text-muted small text-end">
                                <div>{{ note.created_at.strftime('%Y-%m-%d %H:%M') }}</div>
                               
                            </div>
                        </div>
                    </div>
                    {% endfor %}
                </div>
            {% else %}
                <p class="text-muted text-center py-3 small">Ù„Ø§ ØªÙˆØ¬Ø¯ Ø­Ø§Ù„Ø§Øª Ù…Ø³Ø¬Ù„Ø©</p>
            {% endif %}
        </div>
    </div>
</div>

<!-- Ù†Ù‡Ø§ÙŠØ© Ø§Ù„ØªØ¹Ø¯ÙŠÙ„ -->
<!-- Ù†Ù‡Ø§ÙŠØ© Ø§Ù„ØªØ¹Ø¯ÙŠÙ„ -->
<!-- Ù†Ù‡Ø§ÙŠØ© Ø§Ù„ØªØ¹Ø¯ÙŠÙ„ -->
      <!-- Ù‚Ø³Ù… ØªØ­Ø¯ÙŠØ« Ø­Ø§Ù„Ø© Ø§Ù„Ø·Ù„Ø¨ -->
      {% if is_reviewer %}
      <div class="card shadow-sm mb-3 border-0">
        <div class="card-header bg-white py-2">
          <h5 class="mb-0 fs-5"><i class="fas fa-sync-alt ms-2"></i>ØªØ­Ø¯ÙŠØ« Ø­Ø§Ù„Ø© Ø§Ù„Ø·Ù„Ø¨</h5>
        </div>
        
        <div class="card-body p-2">
          <form id="status-form" action="{{ url_for('orders.update_order_status', order_id=order.id) }}" method="POST">
            <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
            <div class="mb-2">
              <label for="status" class="form-label small">Ø§Ù„Ø­Ø§Ù„Ø© Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©</label>
              <select class="form-select form-select-sm" id="status" name="status_slug" required>
                {% for slug, label in [
                  ('under_review', 'Ø¨Ø¥Ù†ØªØ¸Ø§Ø± Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹Ø©'),
                  ('processing', 'Ù‚ÙŠØ¯ Ø§Ù„ØªÙ†ÙÙŠØ°'),
                  ('completed', 'ØªÙ… Ø§Ù„ØªÙ†ÙÙŠØ°'),
                  ('awaiting_payment', 'Ø¨Ø¥Ù†ØªØ¸Ø§Ø± Ø§Ù„Ø¯ÙØ¹'),
                  ('shipped', 'ØªÙ… Ø§Ù„Ø´Ø­Ù†'),
                  ('delivered', 'ØªÙ… Ø§Ù„ØªÙˆØµÙŠÙ„'),
                  ('canceled', 'Ù…Ù„ØºÙŠ'),
                  ('refunded', 'Ù…Ø³ØªØ±Ø¬Ø¹')
                ] %}
                <option value="{{ slug }}" {% if order.status.slug == slug %}selected{% endif %}>{{ label }}</option>
                {% endfor %}
              </select>
            </div>
            <div class="mb-2">
              <label for="note" class="form-label small">Ù…Ù„Ø§Ø­Ø¸Ø§Øª</label>
              <textarea class="form-control form-control-sm" id="note" name="note" rows="2" 
                        placeholder="Ø£Ø¯Ø®Ù„ Ù…Ù„Ø§Ø­Ø¸Ø§ØªÙƒ Ù‡Ù†Ø§..." maxlength="500"></textarea>
            </div>
            <button type="submit" class="btn btn-primary btn-sm w-100">
              <i class="fas fa-save me-1"></i> Ø­ÙØ¸ Ø§Ù„ØªØºÙŠÙŠØ±Ø§Øª
            </button>
          </form>
        </div>
      </div>
{% endif %}
      <!-- Ù‚Ø³Ù… Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø¥Ø¶Ø§ÙÙŠØ© -->
      <div class="card shadow-sm border-0">
        <div class="card-header bg-white py-2">
          <h5 class="mb-0 fs-5"><i class="fas fa-info-circle ms-2"></i>Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø¥Ø¶Ø§ÙÙŠØ©</h5>
        </div>
        
        <!-- Ø¨Ø§Ø±ÙƒÙˆØ¯ Ø§Ù„Ø·Ù„Ø¨ -->
        <div class="text-center mb-3 pt-3">
          <h5 class="mb-2 fs-5"><i class="fas fa-barcode ms-2"></i>Ø¨Ø§Ø±ÙƒÙˆØ¯ Ø§Ù„Ø·Ù„Ø¨</h5>
          {% if order.barcode %}
            <div class="barcode-container p-2 bg-white border rounded d-inline-block">
              <img src="{{ url_for('orders.serve_barcode', filename=order.barcode) | safe }}"
                   alt="Ø¨Ø§Ø±ÙƒÙˆØ¯ Ø§Ù„Ø·Ù„Ø¨ {{ order.id | safe }}"
                   class="img-fluid"
                   style="max-height: 50px;">
              <div class="mt-1 fw-bold fs-6">#{{ order.id | safe }}</div>
            </div>
          {% else %}
            <div class="alert alert-warning d-inline-block p-2">
              <i class="fas fa-exclamation-triangle ms-2"></i>
              Ù„Ù… ÙŠØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø¨Ø§Ø±ÙƒÙˆØ¯ Ù„Ù‡Ø°Ø§ Ø§Ù„Ø·Ù„Ø¨.
            </div>
          {% endif %}
        </div>
        
        <div class="card-body p-2">
          <ul class="list-group list-group-flush small">
            <li class="list-group-item d-flex justify-content-between py-1 px-0">
              <span class="fw-bold">ØªØ§Ø±ÙŠØ® Ø§Ù„Ø·Ù„Ø¨:</span>
              <span>
                {% if order.created_at is string %}
                  {{ order.created_at | safe }}
                {% elif order.created_at %}
                  {{ order.created_at.strftime('%Y-%m-%d %H:%M') }}
                {% else %}
                  ØºÙŠØ± Ù…ØªÙˆÙØ±
                {% endif %}
              </span>
            </li>

            <!-- Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù…Ø³ØªÙ„Ù… -->
            <li class="list-group-item d-flex justify-content-between py-2 px-0">
                <span class="fw-bold">Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªÙ„Ù…:</span>
                <span>
                    {% if order.receiver.name %}
                        {{ order.receiver.name | safe }}
                    {% else %}
                        {{ order.customer.first_name | safe }} {{ order.customer.last_name | safe }}
                    {% endif %}
                </span>
            </li>

            <li class="list-group-item d-flex justify-content-between py-2 px-0">
                <span class="fw-bold">Ù‡Ø§ØªÙ Ø§Ù„Ù…Ø³ØªÙ„Ù…:</span>
                <span>
                    {% if order.receiver.phone %}
                        {{ order.receiver.phone | safe }}
                    {% else %}
                        {{ order.customer.mobile_code | safe }}{{ order.customer.mobile | safe }}
                    {% endif %}
                </span>
            </li>
            <li class="list-group-item d-flex justify-content-between py-2 px-0">
                <span class="fw-bold">Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ:</span>
                <span>{{ order.receiver.email | safe }}</span>
            </li>
            
<li class="list-group-item py-2 px-0">
    <div class="fw-bold mb-1">Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ø´Ø­Ù† Ø§Ù„ÙƒØ§Ù…Ù„:</div>
    <div class="text-muted small">
        {% if order.shipping.address and order.shipping.address != 'Ù„Ù… ÙŠØªÙ… ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ø¹Ù†ÙˆØ§Ù†' %}
            {{ order.shipping.address }}<br>
        {% endif %}
        
        {% if order.shipping.city %}
            {{ order.shipping.city }}{% if order.shipping.postal_code or order.shipping.country %},{% endif %}
        {% endif %}
        
        {% if order.shipping.postal_code %}
            {{ order.shipping.postal_code }}{% if order.shipping.country %},{% endif %}
        {% endif %}
        
        {% if order.shipping.country %}
            {{ order.shipping.country }}
        {% endif %}
    </div>
</li>
            
            <!-- Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø´Ø­Ù† Ø§Ù„Ø¥Ø¶Ø§ÙÙŠØ© -->
            <li class="list-group-item d-flex justify-content-between py-2 px-0">
                <span class="fw-bold">Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø´Ø­Ù†:</span>
                <span>{{ order.shipping.company | default('ØºÙŠØ± Ù…Ø­Ø¯Ø¯', true) | safe }}</span>
            </li>
            
            <li class="list-group-item d-flex justify-content-between py-2 px-0">
                <span class="fw-bold">ØªÙƒÙ„ÙØ© Ø§Ù„Ø´Ø­Ù†:</span>
                <span>{{ order.amount.shipping_cost.amount | safe }} {{ order.amount.shipping_cost.currency | safe }}</span>
            </li>
            
            <li class="list-group-item d-flex justify-content-between py-2 px-0">
                <span class="fw-bold">Ø§Ù„ÙˆØ²Ù† Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ:</span>
                <span>{{ order.total_weight | safe }}</span>
            </li>
            
            {% if order.shipping.address %}
            <li class="list-group-item py-2 px-0">
                <div class="fw-bold mb-2">Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ø¹Ù„Ù‰ Ø§Ù„Ø®Ø±ÙŠØ·Ø©:</div>
                <iframe 
                    width="100%" 
                    height="200" 
                    frameborder="0" 
                    scrolling="no" 
                    marginheight="0" 
                    marginwidth="0" 
                    src="https://maps.google.com/maps?q={{ order.shipping.address | urlencode }}&output=embed">
                </iframe>
            </li>
            {% endif %}
          </ul>
        </div>
      </div>
    </div>
  </div>
</div>

<style>
  /* Ø£Ù†Ù…Ø§Ø· Ø¹Ø§Ù…Ø© Ù„Ù„Ø¬Ø¯ÙˆÙ„ */
  .table {
    width: 100%;
    border-collapse: separate;
    border-spacing: 0 10px;
  }
  
  .table tbody tr {
    background-color: #fff;
    border-radius: 8px;
    box-shadow: 0 2px 4px rgba(0,0,0,0.05);
    transition: all 0.3s ease;
  }
  
  /* Ø£Ù†Ù…Ø§Ø· Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ù„ÙŠÙ„ÙŠ Ù„Ù„Ø¬Ø¯ÙˆÙ„ */
  body.dark-mode .table tbody tr {
    background-color: #2c2f42;
    box-shadow: 0 2px 4px rgba(0,0,0,0.2);
  }
  
  body.dark-mode .table {
    color: #f8f9fa;
  }
  
  body.dark-mode .table .text-muted {
    color: #adb5bd !important;
  }
  
  body.dark-mode .table .text-secondary {
    color: #a0aec0 !important;
  }
  
  body.dark-mode .table .text-dark {
    color: #f8f9fa !important;
  }
  
  body.dark-mode .table .border-bottom {
    border-bottom-color: #3a3f58 !important;
  }
  
  /* ØªØ­Ø³ÙŠÙ†Ø§Øª Ù„Ù„ØµÙˆØ± ÙÙŠ Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ù„ÙŠÙ„ÙŠ */
  body.dark-mode .img-fluid {
    border-color: #3a3f58;
  }
  
  body.dark-mode .bg-light {
    background-color: #3a3f58 !important;
    border-color: #444;
  }
  
  /* ØªØ­Ø³ÙŠÙ†Ø§Øª Ù„Ù„Ù‚ÙˆØ§Ø¦Ù… ÙÙŠ Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ù„ÙŠÙ„ÙŠ */
  body.dark-mode .list-group-flush {
    background-color: #2c2f42;
    border-color: #3a3f58;
  }
  
  body.dark-mode .list-group-item {
    background-color: #2c2f42 !important;
    border-color: #3a3f58 !important;
    color: #f8f9fa !important;
  }
  
  /* ØªØ­Ø³ÙŠÙ†Ø§Øª Ù„Ù„ÙÙˆØ±Ù…Ø§Øª ÙÙŠ Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ù„ÙŠÙ„ÙŠ */
  body.dark-mode .form-control,
  body.dark-mode .form-select {
    background-color: #3a3f58;
    border-color: #444;
    color: #f8f9fa;
  }
  
  body.dark-mode .form-control:focus,
  body.dark-mode .form-select:focus {
    background-color: #3a3f58;
    border-color: #4a4f66;
    color: #f8f9fa;
  }
  
  /* ØªØ­Ø³ÙŠÙ†Ø§Øª Ù„Ù„Ø£Ø²Ø±Ø§Ø± ÙÙŠ Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ù„ÙŠÙ„ÙŠ */
  body.dark-mode .btn-outline-secondary {
    color: #f8f9fa;
    border-color: #4a4f66;
  }
  
  body.dark-mode .btn-outline-secondary:hover {
    background-color: #4a4f66;
    color: #f8f9fa;
  }
  
  /* ØªØ­Ø³ÙŠÙ†Ø§Øª Ù„Ù„Ø¨Ø·Ø§Ù‚Ø§Øª (Cards) ÙÙŠ Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ù„ÙŠÙ„ÙŠ */
  body.dark-mode .card {
    background-color: #2c2f42;
    border-color: #3a3f58;
  }
  
  body.dark-mode .card-header {
    background-color: #3a3f58 !important;
    border-bottom-color: #444 !important;
    color: #f8f9fa;
  }
  
  /* ØªØ­Ø³ÙŠÙ†Ø§Øª Ù„Ù„Ø®Ø±ÙŠØ·Ø© ÙÙŠ Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ù„ÙŠÙ„ÙŠ */
  body.dark-mode iframe {
    filter: invert(90%) hue-rotate(180deg) brightness(85%) contrast(110%);
  }
  
  /* ØªØ­Ø³ÙŠÙ†Ø§Øª Ù„Ù„Ù†ØµÙˆØµ ÙÙŠ Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ù„ÙŠÙ„ÙŠ */
  body.dark-mode .text-dark {
    color: #f8f9fa !important;
  }
  
  body.dark-mode .text-muted {
    color: #adb5bd !important;
  }
  
  /* ØªØ­Ø³ÙŠÙ†Ø§Øª Ù„Ù„ØªÙ†Ø¨ÙŠÙ‡Ø§Øª (Alerts) ÙÙŠ Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ù„ÙŠÙ„ÙŠ */
  body.dark-mode .alert-warning {
    background-color: #664d03;
    border-color: #846404;
    color: #ffecb5;
  }
  
  /* ØªØ­Ø³ÙŠÙ†Ø§Øª Ù„Ù„Ø´Ø±ÙŠØ· Ø§Ù„Ø¬Ø§Ù†Ø¨ÙŠ Ø§Ù„Ø£ÙŠÙ…Ù† */
  body.dark-mode .col-lg-4.bg-light {
    background-color: #252836 !important;
  }
</style>
<style>
  /* Ø£Ù†Ù…Ø§Ø· Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª ÙÙŠ Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ù„ÙŠÙ„ÙŠ */
  body.dark-mode .table tbody tr {
    background-color: #2c2f42 !important;
    border-color: #3a3f58 !important;
  }

  body.dark-mode .table tbody td {
    background-color: #2c2f42 !important;
    border-color: #3a3f58 !important;
  }

  body.dark-mode .list-group-item {
    background-color: #2c2f42 !important;
    border-color: #3a3f58 !important;
    color: #f8f9fa !important;
  }

  body.dark-mode .text-muted {
    color: #adb5bd !important;
  }

  /* ØªØ­Ø³ÙŠÙ† ØµÙˆØ±Ø© Ø§Ù„Ù…Ù†ØªØ¬ ÙÙŠ Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ù„ÙŠÙ„ÙŠ */
  body.dark-mode .img-fluid {
    border: 1px solid #3a3f58;
  }

  body.dark-mode .bg-light {
    background-color: #3a3f58 !important;
  }

  /* ØªØ­Ø³ÙŠÙ† Ø®ÙŠØ§Ø±Ø§Øª Ø§Ù„Ù…Ù†ØªØ¬ */
  body.dark-mode .product-options {
    background-color: #3a3f58;
    border-color: #444;
  }

  body.dark-mode .product-options li {
    background-color: #2c2f42 !important;
    border-color: #3a3f58 !important;
  }
</style>
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
<script>
    // Ù…Ø´Ø§Ø±ÙƒØ© Ø§Ù„Ù…Ù†ØªØ¬ Ø¹Ø¨Ø± ÙˆØ§ØªØ³Ø§Ø¨
// Ù…Ø´Ø§Ø±ÙƒØ© Ø§Ù„Ù…Ù†ØªØ¬ Ø¹Ø¨Ø± ÙˆØ§ØªØ³Ø§Ø¨ Ù…Ø¹ Ù…Ø¹Ø§Ù„Ø¬Ø© ØµÙˆØ±Ø© Amazon S3
document.addEventListener('DOMContentLoaded', function() {
    document.querySelectorAll('.share-btn').forEach((button, index) => {
        button.addEventListener('click', async function() {
            const productName = this.dataset.productName;
            const productImage = this.dataset.productImage;
            const productOptions = JSON.parse(this.dataset.productOptions || '[]');
            
            // Ø¹Ø±Ø¶ ØªØ­Ù…ÙŠÙ„ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„Ù…Ø¹Ø§Ù„Ø¬Ø©
            const swalInstance = Swal.fire({
                title: 'Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ¬Ù‡ÙŠØ² Ù„Ù„Ù…Ø´Ø§Ø±ÙƒØ©',
                text: 'ÙŠØ±Ø¬Ù‰ Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±...',
                icon: 'info',
                showConfirmButton: false,
                allowOutsideClick: false,
                didOpen: () => {
                    Swal.showLoading();
                }
            });
            
            try {
                // Ø¨Ù†Ø§Ø¡ Ù†Øµ Ø§Ù„Ù…Ø´Ø§Ø±ÙƒØ©
                let shareText = `*${productName}*%0A%0A`;
                
                // Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø®ÙŠØ§Ø±Ø§Øª Ø¥Ø°Ø§ ÙˆØ¬Ø¯Øª
                if (productOptions.length > 0) {
                    shareText += `*Ø§Ù„Ø®ÙŠØ§Ø±Ø§Øª:*%0A`;
                    productOptions.forEach(option => {
                        shareText += `ğŸ”¹ ${option.name}: ${option.value}%0A`;
                    });
                    shareText += '%0A';
                }
                
                shareText += '---%0A';
                shareText += 'ØªÙ… Ø§Ù„Ù…Ø´Ø§Ø±ÙƒØ© Ù…Ù† ØªØ·Ø¨ÙŠÙ‚ Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø·Ù„Ø¨Ø§Øª';
                
                // Ù…Ø¹Ø§Ù„Ø¬Ø© ØµÙˆØ±Ø© Amazon S3
                let finalImageUrl = productImage;
                
                // Ø¥Ø°Ø§ ÙƒØ§Ù†Øª Ø§Ù„ØµÙˆØ±Ø© Ù…Ù† Amazon S3ØŒ Ù†Ø­ØªØ§Ø¬ Ø¥Ù„Ù‰ Ù…Ø¹Ø§Ù„Ø¬ØªÙ‡Ø§
                if (productImage && productImage.includes('amazonaws.com')) {
                    // Ù…Ø­Ø§ÙˆÙ„Ø© Ø¬Ù„Ø¨ Ø§Ù„ØµÙˆØ±Ø© ÙˆØªØ­ÙˆÙŠÙ„Ù‡Ø§ Ø¥Ù„Ù‰ base64
                    try {
                        const base64Image = await convertImageToBase64(productImage);
                        finalImageUrl = base64Image;
                    } catch (error) {
                        console.error('Failed to convert Amazon S3 image:', error);
                        // Ø¥Ø°Ø§ ÙØ´Ù„ Ø§Ù„ØªØ­ÙˆÙŠÙ„ØŒ Ù†Ø³ØªØ®Ø¯Ù… Ø§Ù„Ø±Ø§Ø¨Ø· Ø§Ù„Ø£ØµÙ„ÙŠ
                    }
                }
                
                // Ø¨Ù†Ø§Ø¡ Ø±Ø§Ø¨Ø· ÙˆØ§ØªØ³Ø§Ø¨
                let whatsappUrl;
                if (finalImageUrl && finalImageUrl.startsWith('data:image')) {
                    // Ø¥Ø°Ø§ ÙƒØ§Ù†Øª Ø§Ù„ØµÙˆØ±Ø© base64ØŒ Ù†Ø³ØªØ®Ø¯Ù…Ù‡Ø§ Ù…Ø¨Ø§Ø´Ø±Ø© (Ù‚Ø¯ Ù„Ø§ ØªØ¹Ù…Ù„ Ù…Ø¹ ÙˆØ§ØªØ³Ø§Ø¨)
                    whatsappUrl = `https://wa.me/?text=${shareText}`;
                    // Ù†Ø¶ÙŠÙ Ø§Ù„ØµÙˆØ±Ø© ÙƒØ±Ø§Ø¨Ø· Ù…Ù†ÙØµÙ„ ÙÙŠ Ø§Ù„Ù†Øµ
                    shareText += '%0A%0AØ±Ø§Ø¨Ø· Ø§Ù„ØµÙˆØ±Ø©: ' + encodeURIComponent(productImage);
                } else if (finalImageUrl) {
                    // Ø¥Ø°Ø§ ÙƒØ§Ù† Ù„Ø¯ÙŠÙ†Ø§ Ø±Ø§Ø¨Ø· ØµÙˆØ±Ø© Ø¹Ø§Ø¯ÙŠ
                    whatsappUrl = `https://wa.me/?text=${shareText}&media=${encodeURIComponent(finalImageUrl)}`;
                } else {
                    // Ø¥Ø°Ø§ Ù„Ù… ØªÙˆØ¬Ø¯ ØµÙˆØ±Ø©
                    whatsappUrl = `https://wa.me/?text=${shareText}`;
                }
                
                // Ø¥ØºÙ„Ø§Ù‚ Ù†Ø§ÙØ°Ø© Ø§Ù„ØªØ­Ù…ÙŠÙ„
                swalInstance.close();
                
                // ÙØªØ­ ÙˆØ§ØªØ³Ø§Ø¨ ÙÙŠ Ù†Ø§ÙØ°Ø© Ø¬Ø¯ÙŠØ¯Ø©
                window.open(whatsappUrl, '_blank');
                
            } catch (error) {
                swalInstance.close();
                Swal.fire('Ø®Ø·Ø£', 'Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ù…Ø­Ø§ÙˆÙ„Ø© Ø§Ù„Ù…Ø´Ø§Ø±ÙƒØ©: ' + error.message, 'error');
            }
        });
    });
});

// Ø¯Ø§Ù„Ø© Ù„ØªØ­ÙˆÙŠÙ„ ØµÙˆØ±Ø© Amazon S3 Ø¥Ù„Ù‰ base64
async function convertImageToBase64(url) {
    return new Promise((resolve, reject) => {
        const img = new Image();
        img.crossOrigin = 'Anonymous'; // Ù‡Ø°Ø§ Ù…Ù‡Ù… Ù„ØµÙˆØ± Amazon S3
        
        img.onload = function() {
            try {
                const canvas = document.createElement('canvas');
                canvas.width = img.width;
                canvas.height = img.height;
                
                const ctx = canvas.getContext('2d');
                ctx.drawImage(img, 0, 0);
                
                // ØªØ­ÙˆÙŠÙ„ Ø¥Ù„Ù‰ base64
                const dataURL = canvas.toDataURL('image/jpeg');
                resolve(dataURL);
            } catch (error) {
                reject(error);
            }
        };
        
        img.onerror = function() {
            reject(new Error('Failed to load image'));
        };
        
        // Ø¥Ø¶Ø§ÙØ© timestamp Ù„Ù…Ù†Ø¹ Ø§Ù„ØªØ®Ø²ÙŠÙ† Ø§Ù„Ù…Ø¤Ù‚Øª
        const timestamp = new Date().getTime();
        const cacheBusterUrl = url + (url.includes('?') ? '&' : '?') + 't=' + timestamp;
        
        img.src = cacheBusterUrl;
    });
}

// Ø¯Ø§Ù„Ø© Ù„Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø¥Ù…ÙƒØ§Ù†ÙŠØ© Ø§Ù„ÙˆØµÙˆÙ„ Ø¥Ù„Ù‰ Ø§Ù„ØµÙˆØ±Ø©
async function isImageAccessible(url) {
    if (!url) return false;
    
    try {
        // Ø¥Ø¶Ø§ÙØ© timestamp Ù„Ù…Ù†Ø¹ Ø§Ù„ØªØ®Ø²ÙŠÙ† Ø§Ù„Ù…Ø¤Ù‚Øª
        const timestamp = new Date().getTime();
        const cacheBusterUrl = url + (url.includes('?') ? '&' : '?') + 't=' + timestamp;
        
        const response = await fetch(cacheBusterUrl, { 
            method: 'HEAD',
            mode: 'cors'
        });
        return response.ok && response.headers.get('content-type')?.startsWith('image/');
    } catch (error) {
        console.error('Image accessibility check failed:', error);
        return false;
    }
}
  // Ø§Ù„ØªØ­Ù‚Ù‚ Ù‚Ø¨Ù„ Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ù†Ù…Ø§Ø°Ø¬
  document.getElementById('status-form').addEventListener('submit', function(e) {
    const status = document.getElementById('status').value;
    if (status === 'canceled') {
      e.preventDefault();
      Swal.fire({
        title: 'ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø¥Ù„ØºØ§Ø¡',
        text: 'Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ø£Ù†Ùƒ ØªØ±ÙŠØ¯ Ø¥Ù„ØºØ§Ø¡ Ø§Ù„Ø·Ù„Ø¨ØŸ',
        icon: 'warning',
        showCancelButton: true,
        confirmButtonText: 'Ù†Ø¹Ù…ØŒ Ø¥Ù„ØºØ§Ø¡',
        cancelButtonText: 'ØªØ±Ø§Ø¬Ø¹',
        reverseButtons: true
      }).then((result) => {
        if (result.isConfirmed) {
          this.submit();
        }
      });
    }
  });

  // Ø¥Ø¶Ø§ÙØ© ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø·ÙˆÙ„ Ø§Ù„Ø£Ù‚ØµÙ‰ Ù„Ù„Ù†ØµÙˆØµ
  document.querySelectorAll('textarea[maxlength]').forEach(textarea => {
    textarea.addEventListener('input', function() {
      if (this.value.length > this.maxLength) {
        this.value = this.value.substring(0, this.maxLength);
      }
    });
  });

  // Ø¥Ø¶Ø§ÙØ© ØªØ­Ù…ÙŠÙ„ Ù…ØªØ£Ø®Ø± Ù„Ù„ØµÙˆØ±
  document.addEventListener('DOMContentLoaded', function() {
    const lazyImages = document.querySelectorAll('img[loading="lazy"]');
    
    const observer = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          const img = entry.target;
          img.src = img.dataset.src || img.src;
          observer.unobserve(img);
        }
      });
    });

    lazyImages.forEach(img => {
      observer.observe(img);
    });
  });

  // Ø¹Ø±Ø¶ Ø±Ø³Ø§Ø¦Ù„ Ø§Ù„ØªØ£ÙƒÙŠØ¯ Ø¹Ù†Ø¯ ØªØºÙŠÙŠØ± Ø§Ù„Ø­Ø§Ù„Ø© Ø¨Ù†Ø¬Ø§Ø­
  {% if request.args.get('status_updated') %}
  Swal.fire({
    title: 'ØªÙ… Ø§Ù„ØªØ­Ø¯ÙŠØ«!',
    text: 'ØªÙ… ØªØ­Ø¯ÙŠØ« Ø­Ø§Ù„Ø© Ø§Ù„Ø·Ù„Ø¨ Ø¨Ù†Ø¬Ø§Ø­',
    icon: 'success',
    confirmButtonText: 'Ø­Ø³Ù†Ø§Ù‹',
    timer: 3000
  });
  {% endif %}
  
  {% if request.args.get('employee_status_added') %}
  Swal.fire({
    title: 'ØªÙ…Øª Ø§Ù„Ø¥Ø¶Ø§ÙØ©!',
    text: 'ØªÙ…Øª Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø­Ø§Ù„Ø© Ø§Ù„Ù…Ø®ØµØµØ© Ø¨Ù†Ø¬Ø§Ø­',
    icon: 'success',
    confirmButtonText: 'Ø­Ø³Ù†Ø§Ù‹',
    timer: 3000
  });
  {% endif %}
  
  {% if request.args.get('special_status_added') %}
  Swal.fire({
    title: 'ØªÙ… Ø§Ù„Ø­ÙØ¸!',
    text: 'ØªÙ… Ø­ÙØ¸ Ø§Ù„Ø­Ø§Ù„Ø© Ø§Ù„Ø®Ø§ØµØ© Ø¨Ù†Ø¬Ø§Ø­',
    icon: 'success',
    confirmButtonText: 'Ø­Ø³Ù†Ø§Ù‹',
    timer: 3000
  });
  {% endif %}
</script>
{% endblock %} 